# process and thread

### program

- 어떤 작업을 위해 실행할 수 있는 파일

### process

- 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램

- 메모리에 올라와 실행되고 있는 프로그램의 인스턴스(독립적인 개체)

- 운영체제로 부터 시스템 자원을 할당받는 작업의 단위
  
  - cpu 시간, 운영되기위한 주소 공간, code, data, stack, heap 등의 독립된 메모리 영역
  
  - 최소 1개의 스레드
  
  - 다른 프로세스의 자원에 접근하려면 프로세스간 통신을 해야 한다

### thread

- 프로세스 내에서 실행되는 여러 흐름의 단위

- 프로세스의 특정한 수행 경로

- 프로세스가 할당받은 자원을 이용하는 실행의 단위

- 특징
  
  - 프로세스 내에서 각각의 stack만 할당받고 주소공간, code, data, heap 영역은 공유한다.
  
  - 한 스레드가 프로세스 자원을 변결하면 다른 스레드에서 그 결과를 확인 가능
  
  - 별도의 레지스터와 스택을 가진다?

### 자바 thread

- JVM이 운영체제 역할

- JVM에 의해 스케줄 되는 실행 단위 코드 블록
  
  - 몇개의 스레드
  
  - 스레드로 실행되는 프로그램코드의 메모리 위치
  
  - 스레드의 상태
  
  - 우선 순위

### 멀티 프로세스와 멀티 스레드 차이

- 멀티 프로세스
  
  - 프로세스중 문제가 발생하면 전파되지 않는다
  
  - context switching
    
    - cpu가 여러 프로세스를 돌아가면서 작업을 처리하는 과정
    
    - 동작 중인 프로세스의 상태를 보관, 대기하던 다음 순서의 프로세스를 동작시키는 작업
  
  - context switching 과정에서 캐쉬 메모리 초기화 등 오버 헤드가 발생한다.
    
    - 오버헤드란 프로그램의 실행흐름에서 나타나는 현상중 하나로 예를 들어 , 프로그램의 실행흐름 도중에 동떨어진 위치의 코드를 실행시켜야 할 때 , 추가적으로 시간,메모리,자원이 사용되는 현상입니다.
      
      한마디로 정의하자면,  오버 헤드는 특정 기능을 수행하는데 드는 간접적인 시간, 메모리 등 자원을 말한다.
  
  - 프로세스 사이에 공유하는 자원이  없어 context switching이 발생하면 모든 데이터를 리셋하고 다시 캐쉬 정보를 불러온다
  
  - 복잡한 통신 기법

- 멀티 스레드
  
  - 웹서버는 대표적인 멀티 스레드 응용 프로그램
  
  - 시스템 자원 소모 감소
  
  - 시스템 처리 비용 감소
    
    - context switching이 빠르다
    
    - 스택을 제외한 영역의 메모리를 고융하기 때문에 통신의 부담이 적다
  
  - 디버깅이 어렵다
  
  - 다른 프로세스에서 스레드를 제어 할 수 없다
  
  - 자원 공유의 문제 발생
  
  - 하나의 스레드에 문제가 발생하면 전체 프로세스가 영향을 받는다

## 하드웨어 스레드

•

하드웨어 스레드는 운영체제의 최소 작업 단위로, 물리적 CPU 또는 코어를 말한다.

•

CPU코어는 원칙적으로 한 번에 1개의 쓰레드만 처리할 수 있다.

◦

단, intel의 HyperThreading, AMD의 SMT(Simutaneous MultiThreading) 기술로 인해 1개의 코어가 동시에 2개의 쓰레드를 지원할 수 있게 되었다.

•

6코어 12쓰레드는 6개의 코어에서 12개의 스레드가 병렬적으로 실행될 수 있다. 여러개의 프로그램이 동시에 실행되는 것처럼 보이는 것은 시분할(time sharing) 기법이다.

#### 소프트웨어 스레드

•

소프트웨어 스레드는 응용 프로그램이 갖는 최소 작업 단위로, 이는 시스템 자원 한도 내에 계속해서 만들어 낼 수 있다.

•

소프트웨어 스레드가 많다고 해서 그것들이 병렬적으로 실행될 수 있는 건 아니다. 물리적 CPU(위의 예에서는 12스레드)를 초과할 수 없다.

#### 결론

•

하나의 하드웨어 스레드는 수 많은 소프트웨어 스레드를 실행할 수 있다. 운영체제는 소프트웨어 스레드를 하드웨어 스레드에 지정(mapping)하여 CPU가 프로그램을 실행시킬 수 있도록 하는 것이다

출처: [하드웨어 스레드와 소프트웨어 스레드 차이](https://80000coding.oopy.io/3117e1bd-e14c-4edc-89da-37804de074d6)[하드웨어 스레드와 소프트웨어 스레드 차이](https://80000coding.oopy.io/3117e1bd-e14c-4edc-89da-37804de074d6)
